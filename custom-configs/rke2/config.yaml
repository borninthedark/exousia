# RKE2 Server Configuration
# ==========================
#
# Basic RKE2 server configuration for single-node or multi-node clusters
# Override via cloud-init for specific deployments
#
# Documentation: https://docs.rke2.io/install/configuration

# Cluster configuration
# ---------------------

# Write kubeconfig with proper permissions
write-kubeconfig-mode: "0644"

# Cluster CIDR (default pod network)
cluster-cidr: "10.42.0.0/16"

# Service CIDR (default service network)
service-cidr: "10.43.0.0/16"

# Cluster DNS
cluster-dns: "10.43.0.10"

# Node configuration
# ------------------

# Node name (will be set by cloud-init or hostname)
# node-name: "rke2-node-1"

# Node labels
# node-label:
#   - "node-role.kubernetes.io/control-plane=true"

# Node taints for control plane
# node-taint:
#   - "node-role.kubernetes.io/control-plane:NoSchedule"

# Networking
# ----------

# CNI plugin (default: canal, options: calico, cilium, canal, flannel)
cni: "canal"

# Disable components
# ------------------

# Disable built-in components if not needed
# disable:
#   - rke2-ingress-nginx
#   - rke2-metrics-server

# TLS configuration
# -----------------

# TLS SAN for API access from host
tls-san:
  - "192.168.122.1"
  - "localhost"
  - "127.0.0.1"

# Data directory
# --------------

# RKE2 data directory (default: /var/lib/rancher/rke2)
# data-dir: "/var/lib/rancher/rke2"

# Container runtime
# -----------------

# Snapshotter (default: overlayfs, options: native, overlayfs, stargz)
# snapshotter: "overlayfs"

# Kubelet configuration
# ---------------------

# Kubelet arguments
# kubelet-arg:
#   - "max-pods=110"
#   - "eviction-hard=memory.available<500Mi"

# Kube-apiserver configuration
# ----------------------------

# API server arguments
# kube-apiserver-arg:
#   - "anonymous-auth=false"

# Etcd configuration
# ------------------

# Etcd snapshot settings (for backup/recovery)
# etcd-snapshot-schedule-cron: "0 */12 * * *"
# etcd-snapshot-retention: 5

# Agent configuration
# -------------------

# Agent token for joining nodes (set during initial setup)
# token: "my-shared-secret"

# Server URL for agent nodes to join
# server: "https://192.168.122.100:9345"
