# Debian Bootc Configuration
# Based on bootcrew/debian-bootc

name: debian-bootc
description: Debian (unstable) with bootc composefs-native backend
image-type: debian

# Base image configuration
base-image: debian:unstable

# Container metadata
labels:
  org.opencontainers.image.title: "Debian Bootc"
  org.opencontainers.image.description: "Debian unstable with bootc composefs support"
  org.opencontainers.image.source: "https://github.com/borninthedark/exousia"
  org.opencontainers.image.licenses: "MIT"
  maintainer: "uryu"

# Build configuration
build:
  enable_plymouth: false

# Modules define the build steps
modules:
  # Bootcrew setup: build bootc from source and configure filesystem
  - type: bootcrew-setup
    system-deps:
      - btrfs-progs
      - dosfstools
      - dracut
      - e2fsprogs
      - linux-image-generic
      - ostree
      - skopeo
      - systemd
      - systemd-boot
      - xfsprogs
      - zstd

  # Validation and finalization
  - type: script
    scripts:
      - bootc container lint
