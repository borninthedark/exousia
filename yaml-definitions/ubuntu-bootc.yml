# Ubuntu Bootc Configuration
# Based on bootcrew/ubuntu-bootc

name: ubuntu-bootc
description: Ubuntu with bootc composefs-native backend
image-type: ubuntu

# Base image configuration
base-image: ubuntu:mantic

# Container metadata
labels:
  org.opencontainers.image.title: "Ubuntu Bootc"
  org.opencontainers.image.description: "Ubuntu with bootc composefs support"
  org.opencontainers.image.source: "https://github.com/borninthedark/exousia"
  org.opencontainers.image.licenses: "MIT"
  maintainer: "uryu"

# Build configuration
build:
  enable_plymouth: false

# Modules define the build steps
modules:
  # Bootcrew setup: build bootc from source and configure filesystem
  - type: bootcrew-setup
    system-deps:
      - btrfs-progs
      - dosfstools
      - dracut
      - e2fsprogs
      - linux-generic
      - ostree
      - skopeo
      - systemd
      - xfsprogs
      - zstd

  # Validation and finalization
  - type: script
    scripts:
      - bootc container lint
