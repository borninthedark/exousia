# Arch Linux Bootc Configuration
# Based on bootcrew/arch-bootc

name: arch-bootc
description: Arch Linux with bootc composefs-native backend
image-type: arch

# Base image configuration
base-image: docker.io/archlinux/archlinux:latest

# Container metadata
labels:
  org.opencontainers.image.title: "Arch Bootc"
  org.opencontainers.image.description: "Arch Linux with bootc composefs support"
  org.opencontainers.image.source: "https://github.com/borninthedark/exousia"
  org.opencontainers.image.licenses: "MIT"
  maintainer: "uryu"

# Build configuration
build:
  enable_plymouth: false

# Modules define the build steps
modules:
  # Bootcrew setup: build bootc from source and configure filesystem
  - type: bootcrew-setup
    system-deps:
      - base
      - dracut
      - linux
      - linux-firmware
      - ostree
      - btrfs-progs
      - e2fsprogs
      - xfsprogs
      - dosfstools
      - skopeo
      - dbus
      - dbus-glib
      - glib2
      - shadow

  # Validation and finalization
  - type: script
    scripts:
      - bootc container lint
