# tmpfiles.d configuration for libvirt directories
# Ensures libvirt directories exist with correct permissions and SELinux contexts
# Required for virt-manager and libvirt to function properly on atomic/immutable systems

# Type Path                          Mode  UID   GID     Age  Argument

# Main libvirt data directory
d      /var/lib/libvirt              0755  root  root    -    -
z      /var/lib/libvirt              0755  root  root    -    virt_var_lib_t

# Libvirt dnsmasq directory (for NAT networking)
d      /var/lib/libvirt/dnsmasq      0755  root  root    -    -
z      /var/lib/libvirt/dnsmasq      0755  root  root    -    virt_var_lib_t

# VM disk images directory
d      /var/lib/libvirt/images       0711  root  root    -    -
z      /var/lib/libvirt/images       0711  root  root    -    virt_image_t

# QEMU runtime directory
d      /var/lib/libvirt/qemu         0751  qemu  qemu    -    -
z      /var/lib/libvirt/qemu         0751  qemu  qemu    -    virt_var_lib_t

# Network configs
d      /var/lib/libvirt/network      0700  root  root    -    -
z      /var/lib/libvirt/network      0700  root  root    -    virt_var_lib_t

# Boot loader files
d      /var/lib/libvirt/boot         0711  root  root    -    -
z      /var/lib/libvirt/boot         0711  root  root    -    virt_var_lib_t

# Runtime directory for sockets and PIDs
d      /run/libvirt                  0755  root  root    -    -
z      /run/libvirt                  0755  root  root    -    virt_var_run_t

d      /run/libvirt/qemu             0755  qemu  qemu    -    -
z      /run/libvirt/qemu             0755  qemu  qemu    -    virt_var_run_t

# Log directory
d      /var/log/libvirt              0750  root  root    -    -
z      /var/log/libvirt              0750  root  root    -    virt_log_t

d      /var/log/libvirt/qemu         0750  root  root    -    -
z      /var/log/libvirt/qemu         0750  root  root    -    virt_log_t
